name: run_system_tests

on:
  workflow_call:
  workflow_dispatch:

inputs:
  configuration:
    description: "configuration"
    required: true
    default: ""

jobs:
  run_system_tests:
    runs-on:
      - self-hosted
      - rdss-nidaqmxbot-${{ inputs.configuration }}
    timeout-minutes: 80
    steps:
      - name: checkout repository
        uses: actions/checkout@v3
      - name: Install dependencies
        run: poetry install
      - name: Run system tests
        run: poetry run tox